<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Spark Demo">
    <meta name="author" content="Harish Chawla">
    <title>Cisco Spark-SDK Healthcare Demo</title>
    <!-- Spark JS SDK -->
    <script src="assets/js/bundle.js"></script>

    <link rel="stylesheet" href="https://code.s4d.io/widget-space/production/main.css">
    <!-- jQuery & jqueryui core -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <!-- Bootstrap core CSS -->
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font-Awesome CSS -->
    <script src="https://use.fontawesome.com/36845998fa.js"></script>
    <!-- Custom styles for this template -->
    <link href="assets/css/heroic-features.css" rel="stylesheet">
    <link href="assets/css/round-about.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- insert Cisco Spark Widget -->
    <script src="https://code.s4d.io/widget-space/production/bundle.js"></script>
    

  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#"><i class="fa fa-heartbeat fa-cog rediconcolor" aria-hidden="true"></i><b> MEDi</b>Syn Demo</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#About">About
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#Services">Services</a>
            </li>
            <li class="nav-item">
            <button id="add-token" class="btn btn-token">
              <i class="fa fa-id-badge"></i>
                Use Token</button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div id="About" class="container">

      <!-- Jumbotron Header -->
      <header class="jumbotron my-4 text-center">
        <h1 class="display-6"><b>Unbounded Health Care Access</b></h1>
        <p class="lead">Start the digital transformation of your healthcare organization today. Around the world, our collaboration experts are securely connecting patients, doctors, and processes to increase access, quality of care, and efficiency. We lead the industry with state-of-the-art collaboration solutions that lay the foundation for a healthier tomorrow.</p>
        <!--a id="SparkURIDialog" class="btn btn-success" data-toggle="modal" data-target="#SIPURIModal" href="#"><i class="fa fa-address-card"></i> Call a Cisco Representative!</a-->
        <button id="SparkURIDial" class="btn btn-primary">
          <i class="fa fa-address-card"></i> Call your Cisco representative now!
        </button>
      </header>

      <!-- Page Features -->
      <div id="Services" class="row text-center">

        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card">
            <img class="card-img-top" src="assets/img/med-img-1.png" alt="">
            <div class="card-body">
              <h4 class="card-title">Pediatric Health Plans</h4>
              <p class="card-text">Preventive health care consults and health plan developments; our collaborative pediatric specialists provide live expertise in childrenâ€™s health.</p>
            </div>
            <div class="card-footer">
              <button id="SparkGroupMeet" class="btn btn-primary">
              <i class="fa fa-users"></i> Contact Group
            </button>
            </div>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card">
            <img class="card-img-top" src="assets/img/med-img-2.jpg" alt="">
            <div class="card-body">
              <h4 class="card-title">Urgent Care</h4>
              <p class="card-text">Chat with our delightful scheduling BOT and choose a convenient location and arrival time that's best for you and wait in the comfort of your own home.</p>
            </div>
            <div class="card-footer">
              <button id="SparkBOTMessage" class="btn btn-primary">
                <i class="fa fa-android"></i> Schedule Now
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 text-center mb-4">
            <div class="card">
            <!--img class="rounded-circle img-fluid d-block mx-auto" src="assets/img/member2-200px.jpg" alt=""-->
                <img class="card-img-top" src="assets/img/med-img-3.jpeg" alt="">
            <div class="card-body">
              <h4 class="card-title">KwikRx</h4>
              <p class="card-text">Prescription writing services are currenlty online. Get a consult from the comfort of your home!</p>
              <!-- a class="btn btn-success" href="#"><i class="fa fa-phone-square"></i> Call</a-->
            </div>
            <div class="card-footer">
              <button id="SparkVideoCall" class="btn btn-primary">
                <i class="fa fa-phone-square"></i> Call Now
              </button>
            </div>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 text-center mb-4">
            <div class="card">
                <!--img class="rounded-circle img-fluid d-block mx-auto" src="assets/img/member3-200px.jpg" alt=""-->
                <img class="card-img-top" src="assets/img/med-img-4.jpg" alt="">                 
            <div class="card-body">
              <h4 class="card-title">Resident Relations</h4>
              <p class="card-text">Discuss concerns with or provide direct feedback to our Resident Program Officer</p>
            </div>
            <div class="card-footer">
              <!--a class="btn btn-primary" href="#"><i class="fa fa-comments"></i> Message</a-->
              <button id="SparkMessage" class="btn btn-primary">
                <i class="fa fa-comments"></i> Chat
              </button>
            </div>
        </div>
        </div>
      </div>

  </div>
      <!-- /.row -->
    <!-- /.container -->

    <!-- Footer -->
    <footer class="py-5 bg-dark">
      <div class="container">
        <h6 class="m-0 text-center text-white">Copyright &copy; Cisco Sytems 2017 <br> S4D TME Group</h6>
      </div>
      <!-- /.container -->
    </footer>

    <!-- Spark Popup Dialog -->
    <div id="popup" class="card card-title text-center btn btn-primary">
      <script>
        console.log("inside the DIV layer");
        //var widgetEl = document.getElementById('popup');
      </script>
      <p>This is the default Spark Widget/Space dialog which should not be visible!</p>
    </div>

    <!-- display:none in style.css for this section, used for debugging widget-->
    <div id="widget-events">
      <script>
        var widgetEventsEl = document.getElementById('widget-events');
      </script>
    </div>

<!--disable entire site with overlay
<script> var overlay = jQuery('<div id="overlay"> </div>');
  overlay.appendTo(document.body)
</script>
-->
      
<!-- START: Bootstrap modal for Token Dialog -->
<div class="modal fade" id="tokenModal" tabindex="-1" role="dialog" aria-labelledby="tokenModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="tokenModalLabel">
                <i class="fa fa-id-badge"></i> Use Token</h5>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
            </div>
            <div class="modal-body text-center">
                <!--h3>Modal Body</h3-->
                <form id="enter_token_form">
                    <p>
                    Enter your <a target="_blank" href="https://developer.ciscospark.com">Spark for Developers</a>
                    or Guest access token: 
                    </p>
                    <p><input type="text" name="sparkToken" id="tokenID2">
                      <!--input type="button" onclick="askforToken()" value="Submit"-->
                    <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="getToken()">Save</button>
                    </p>
                </form>
            </div>
            <!--div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
        </div-->
    </div>
  </div>
</div>
<!-- END: Bootstrap modal for Token Dialog -->

<!-- START: Modal for SparkWidget - default -->     
<div class="modal fade" id="sparkwidgetmodal" tabindex="-1" role="dialog" aria-labelledby="sparkwidgetmodal" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <!--div class="modal-header">
            <h5 class="modal-title">Spark Widget Modal</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div-->
          <div class="modal-body">
            <div id="embedhere" style="padding:0px 0px; height:500px; width:auto;">Spark should embed here</div>
          </div>
          <!--div class="modal-footer">
            <button type="button" class="btn btn-primary">Save changes</button>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div-->
        </div>
    </div>
</div>
<!-- END: Modal for SparkWidget - default -->    
      
      
<!-- START: Bootstrap modal for URI Call Dialog -->
<div class="modal fade" id="URIModal" tabindex="-1" role="dialog" aria-labelledby="URIModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <h5 class="modal-title" id="URIModalLabel">
                <i class="fa fa-address-card"></i> Spark SDK URI Dialing </h5>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
            </div>
            <div class="modal-body text-center">
                <!--h3>Modal Body</h3-->
                <form id="enter_uri_form">
                    <p>Who would you like to call?</p>
                    <p><input type="text" name="sparkURI" id="sparkURI">
                    <br>
                    <br>
                    <button type="button" class="btn btn-success" data-dismiss="modal" onclick="dialURI2()">Call Now</button>
                    </p>
                </form>
            </div>
            <!--div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
        </div-->
    </div>
  </div>
</div>
<!-- END: Bootstrap modal for URI Call Dialog -->
      
<script>
var tokenmodaloptions = {
    "backdrop" : "static",
    "keyboard" : false,
    "show" : false
};

//Declare Global Variables
//var mycookie = document.cookie;
var theToken, theURI;
var widgetEl;
var widgetObject;
var residentchatid;
var SparkBOTEmail = "ERScheduler@sparkbot.io";
var SparkGroupID = "7487563745ewrwrwr3r24r2387r827hxyr872ff";
var meet1on1URI = "hachawla@ucdemolab.com";
//var message1on1Email = "";

$( "#SparkGroupMeet" ).on( "click", function(event){
  var cell_value = $(event.target).text();
  showPopup(cell_value);
  pingSparkGroup();
    //  $( "#dialog" ).dialog( "open" );
    });

$( "#SparkBOTMessage" ).on( "click", function(event){
  //console.log(event);
  var cell_value = $(event.target).text();
  showPopup(cell_value);
  messageSparkBOT();
    //  $( "#dialog" ).dialog( "open" );
    });

$( "#SparkVideoCall" ).on( "click", function(event){
  var cell_value = $(event.target).text();
  showPopup(cell_value);
  meet1on1();
    //  $( "#dialog" ).dialog( "open" );
    });

$( "#SparkMessage" ).on( "click", function(event){
  var cell_value = $(event.target).text();
  showPopup(cell_value);
  if(residentchatid == null){
    createnewspace();
  }
    //  $( "#dialog" ).dialog( "open" );
    });

$( "#SparkURIDial" ).on( "click", function(){
  //var cell_value = $(event.target).text();
  //showPopup(cell_value);
    //  $( "#dialog" ).dialog( "open" );
     $('#URIModal').modal("toggle");
    });
    
$( "#add-token" ).on( "click", function(event) {
    //getToken($(event.target));
    //var submitted_value =  
    //askforToken();
    $('#tokenModal').modal(tokenmodaloptions);
});
      
$(document).ready(function() {
    console.log("Everything is loaded");
    $('#tokenModal').modal(tokenmodaloptions);
    $('#sparkwidgetmodal').modal(tokenmodaloptions);
    $('#URIModal').modal(tokenmodaloptions);
    $('#tokenModal').modal('show');
    $('.modal-dialog').draggable();
    
    $('#embedhere').on('show.bs.modal', function () {
    console.log("in the modal function");
    $('#embedhere').resizable({
    });
        
    $(this).find('.modal-body').css({
            //'max-height':'100%',
            'overflow': 'hidden',
            'resizable': 'true'
        });
    });
    
    
});
</script> 
<!-- SparkPopups JS -->
<script type="text/javascript" src="assets/js/SparkPopups.js"></script>

<!--      
<button type="button" data-toggle="modal" data-target="#sparkwidgetmodal">Toggle Spark modal</button>
-->
</body>
</html>
